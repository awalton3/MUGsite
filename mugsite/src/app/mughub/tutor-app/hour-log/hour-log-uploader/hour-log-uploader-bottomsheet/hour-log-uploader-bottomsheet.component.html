<mughub-headnav title="Hour Log" iconLeft="close" iconRight="done" (leftIconToggled)="onClose()" (rightIconToggled)="onSubmit()" [enableIconRight]="hourLogForm.valid"></mughub-headnav>
<form [formGroup]="hourLogForm" class="drawer-form">

  <p class="drawer-form-label">STUDENT NAME(S)</p>
  <mat-form-field floatLabel="never" fxFill>
    <mat-chip-list #chipList aria-label="Student Selection">
      <mat-chip *ngFor="let connection of selectedConnections" [selectable]="selectable" [removable]="removable" (removed)="removeConnectionChip(connection)">
        {{ connection.name }}
        <i class="material-icons" matChipRemove *ngIf="removable">cancel</i>
      </mat-chip>
      <input
        #connectionInput
        matInput
        formControlName="connection"
        placeholder="Ex. John Doe"
        class="drawer-form-input"
        [matAutocomplete]="auto"
        [matChipInputFor]="chipList"
        [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
        [matChipInputAddOnBlur]="addOnBlur"
        (matChipInputTokenEnd)="addConnectionChip($event)">
    </mat-chip-list>
    <mat-autocomplete #auto="matAutocomplete" (optionSelected)="connectionSelected($event)">
      <mat-option (click)="selectedConnection = connection" *ngFor="let connection of filteredConnections | async" [value]="connection.name" class="background-eee">
        <div fxLayout="row" fxLayoutAlign="start center">
          <div class="profile-image-container-mini" [ngStyle]="{'background-image': 'url(' + connection.photoUrl + ')'}" style="margin-right: 15px"></div>
          <span class="autocomp-text">{{ connection.name }}</span>
        </div>
      </mat-option>
    </mat-autocomplete>
  </mat-form-field>

  <p class="drawer-form-label">DATE</p>
  <mat-form-field floatLabel="never" class="widthFullPer">
    <input (click)="dp.open()" [matDatepicker]="dp" [min]="hourLogService.getMinDate()" matInput formControlName="date" placeholder="08/23/19" class="drawer-form-input">
    <mat-datepicker-toggle matSuffix [for]="dp"></mat-datepicker-toggle>
    <mat-datepicker #dp [color]="'accent'"></mat-datepicker>
  </mat-form-field>

  <p class="drawer-form-label">HOURS</p>
  <div fxLayout="row" fxLayoutAlign="center center" fxFill>
    <mat-form-field floatLabel="never" class="widthHalfPer">
      <input matInput type="time" formControlName="startTime" class="drawer-form-input">
    </mat-form-field>
    <p style="padding: 0px 15px; color: grey">to</p>
    <mat-form-field floatLabel="never" class="widthHalfPer">
      <input matInput type="time" formControlName="endTime" class="drawer-form-input">
    </mat-form-field>
  </div>

  <p class="drawer-form-label">REPEAT?</p>
  <p class="drawer-form-text">
    Tired of logging events manually? Let us automatically logged this event for you. Click the button below to get started.
  </p>
  <br>
  <button (click)="onAutomate()" mat-stroked-button color="accent" class="widthFullPer" fxLayoutAlign="center center">AUTOMATE</button>

</form>

<div *ngIf="data.isEditMode" (click)="onDelete()" class="drawer-sticky-btn-red" fxLayoutAlign="center center" matRipple>
  DELETE
</div>
